## 4.1 JDK的命令行工具

### 4.1.1 jps

全称JVM Process Status Tool, 可以列出正在运行的虚拟机进程，并显示虚拟机执行主类，以及这些进程的本地虚拟机唯一ID(LVMID)。LVMID与操作系统的进程ID是一致的。

### 4.1.2 jstat：虚拟机统计信息监视工具

- jstat是用于监视虚拟机各种**运行状态信息**的命令行工具
- 显示本地或远程虚拟机进程中的类装载，内存，垃圾收集，JIT编译等运行数据
- 能够查到的虚拟机信息主要分为三类：类装载，垃圾收集，运行期编译状况

![](/Users/chenjing/Desktop/LearningNotes/JVM/pic/3-1 jstat工具主要选项.png)

### 4.1.3 jinfo：Java配置信息查询工具

- 作用是实时查看虚拟机各项参数
- 使用jps -v只能查看虚拟机启动时显式指定的参数列表，而使用jinfo -flag可以查询未显式指定的参数
- 使用jinfo -sysprops可以查看虚拟机System.getProperties()的内容

### 4.1.4 jmap：Java内存映像工具

- jmap命令用于生产堆转储快照（称为heapdump或dump文件），除此之外可通过设置JVM参数-XX:+HeapDumpOnOutOfMemoryError参数，让JVM在出现OOM异常之后自动生成dump文件
- -histo 选项，显示堆中对象统计信息，包括类，实例数量，合计容量

### 4.1.5 jhat:虚拟机堆转储快照分析工具

- jhat和jmap搭配使用，用来分析jmap生成的堆转储快照
- 但是一般是使用其他dump分析工具

### 4.1.6 jstack：Java堆栈跟踪工具

- jstack用于生成虚拟机当前时刻的线程快照（称为threaddump或者javacore文件），
- 线程快照就是虚拟机内每一条线程正在执行的方法堆栈的集合，生成线程快照主要是为了定位线程出现长时间停顿的原因，如线程间死锁，死循环，请求外部资源导致的长时间等待等
- 线程出现停顿的时候，调用jstack来查看各个线程的调用堆栈，就知道没有响应的线程到底在后台做什么事情，或者等待什么资源

## 4.2 JDK可视化工具

### 4.2.1 JConsole：Java监视与管理控制台

- 提供远程监控功能
- 内存监控，线程监控d'f'f'f'f'f

### 4.2.2 VisualVM：多合一故障处理工具

- 目前为止随JDK发布的功能最强大的运行监控和故障处理程序，还提供性能分析功能
- 可以下载各种插件来增强功能
- 可以生成并浏览堆转储快照
- 分析程序性能，也就是分析CPU和内存使用情况
- BTrace动态日志追踪插件，可以在不停止JVM的情况下，动态插入调试代码





