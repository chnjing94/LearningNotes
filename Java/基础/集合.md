## Collection

![](./pic/collection类.png)



### List

### ArrayList

- 父类：AbstractList

- 接口：List, RandomAccess, Cloneable, Serializable

- 每次扩容固定增加50%容量

- ```java
  transient Object[] elementData; // 存储元素，用transient标记，因为elementData会预留一些空间，直接序列化会浪费空间。
  ```

- ```java
  private void writeObject(java.io.ObjectOutputStream s) //实现了writeObject方法来做序列化。因为是private方法，需要使用反射的方式调用。
  ```

- ```java
  protected transient int modCount = 0; //记录结构性变化次数，如add, remove, addAll。同时用来实现fail-fast机制。
  ```

### LinkedList

- 父类：AbstractSequentialList

- 接口：Deque, List, Cloneable, Serializable

- ```java
      /**
       * Pointer to first node.
       */
      transient Node<E> first; // 头结点
  
      /**
       * Pointer to last node.
       */
      transient Node<E> last; // 尾结点，实现Deque功能，transient防止被序列化
  ```

- ```java
    // 数据存储对象，包含next和prev Node  
  	private static class Node<E> {
          E item;
          Node<E> next;
          Node<E> prev;
  
          Node(Node<E> prev, E element, Node<E> next) {
              this.item = element;
              this.next = next;
              this.prev = prev;
          }
      }
  ```



### Vector

和ArrayList区别：

- Vector是线程安全的，ArrayList不是。Vector所有方法都使用了synchronized。
- 每次扩容量为capacityIncrement，如果不指定则增加一倍容量

### Stack

- 是Vector子类，多提供了push, pop, peek, search方法。
- 使用大量synchronized方法来实现线程安全。性能不佳，Vector和Stack被认为是过时的容器。







## Map

![](./pic/map类.png)